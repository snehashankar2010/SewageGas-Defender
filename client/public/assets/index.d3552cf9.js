var z=Object.defineProperty,O=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var P=(r,l,o)=>l in r?z(r,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[l]=o,h=(r,l)=>{for(var o in l||(l={}))q.call(l,o)&&P(r,o,l[o]);if(E)for(var o of E(l))W.call(l,o)&&P(r,o,l[o]);return r},p=(r,l)=>O(r,B(l));import{r as n,u as D,j as t,a as e,L as x,F as I,b as K,c as T,m as b,A as v,C as U,d as V,e as $,P as H,f as G,p as Y,g as J,h as Q,i as Z,k as X,l as ee,n as te,o as re,N as ae,B as se,R as le,q as S,s as ne,t as oe}from"./vendor.8b688fd7.js";const ie=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function u(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}};ie();var N=n.exports.createContext({user:null,setUser:()=>{}});const A=[{name:"Dashboard",link:"/dashboard"}],de=({link:r})=>e(x,{to:r.link,className:"group block py-1",children:t("span",{className:"relative",children:[r.name,e("div",{className:"absolute bottom-0 h-0.5 w-full scale-0 bg-white transition duration-[200ms] ease-in-out group-hover:scale-100"})]})}),j=({link:r})=>e(x,{to:r.link,className:"group block py-1",children:t("span",{className:"relative",children:[r.name,e("div",{className:"absolute bottom-0 h-0.5 w-full scale-0 bg-white transition duration-[200ms] ease-in-out group-hover:scale-100"})]})}),ce=()=>{const[r,l]=n.exports.useState(!1),{user:o,setUser:u}=n.exports.useContext(N),s=D(),a=()=>{localStorage.removeItem("token"),s("/",{replace:!0}),u(null)};n.exports.useEffect(()=>{const c=()=>{window.innerWidth>=670&&l(!1)};return window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const d=()=>{l(!r)};return t("nav",{"aria-label":"Main Navigation",className:"relative flex-shrink-0 bg-green-600 p-2 px-4 text-white",children:[t("div",{className:"flex w-full items-center justify-between",children:[e(x,{to:"/",className:"mr-8 flex-shrink-0 font-bold tracking-wider",children:"Temperature Iot"}),t("ul",{className:"navsm:flex navsm:items-center hidden w-full justify-end gap-4",children:[A.map(c=>e("li",{children:e(de,{link:c})},c.name)),o?e("li",{children:e("button",{onClick:a,className:"block rounded-3xl border-2 border-white py-1 hover:bg-white/90 hover:text-green-600",children:e("span",{className:"px-3",children:"Logout"})})},"Logout"):t(I,{children:[e("li",{children:e(x,{to:"/login",className:"ml-4 block rounded-3xl bg-white py-1 hover:bg-white/90",children:e("span",{className:"px-3 text-green-600",children:"Login"})})},"Login"),e("li",{children:e(x,{to:"/signup",className:"block rounded-3xl border-2 border-white py-1 hover:bg-white/90 hover:text-green-600",children:e("span",{className:"px-3",children:"Signup"})})},"Signup")]})]}),e("button",{className:"navsm:hidden h-6 w-6 cursor-pointer",onClick:d,children:t("div",{className:"relative flex w-6 items-center justify-center",children:[e("span",{className:`absolute h-px w-full transform bg-current transition ${r?"translate-y-0 rotate-45":"-translate-y-2 "}`}),e("span",{className:`absolute h-px w-full transform bg-current transition ${r?"translate-x-3 opacity-0":"opacity-100"}`}),e("span",{className:`absolute h-px w-full transform bg-current transition ${r?"translate-y-0 -rotate-45":"translate-y-2"}`})]})})]}),e("div",{className:`transition-max-h w-full overflow-hidden duration-[400ms] ease-in-out ${r?"max-h-96":"max-h-0"}`,children:t("ul",{children:[A.map(c=>e("li",{children:e(j,{link:c})},c.name)),o?e("li",{children:e("button",{onClick:a,className:"group block py-1",children:t("span",{className:"relative",children:["Logout",e("div",{className:"absolute bottom-0 h-0.5 w-full scale-0 bg-white transition duration-[200ms] ease-in-out group-hover:scale-100"})]})})},"Logout"):t(I,{children:[e("li",{children:e(j,{link:{name:"Login",link:"/login"}})},"Login"),e("li",{children:e(j,{link:{name:"Signup",link:"/signup"}})},"Signup")]})]})})]})};var me="/assets/github_icon.b8355a8c.svg",ue="/assets/discord_icon.f1d4c9ba.svg";const he=[{name:"Login",link:"/login"},{name:"Signup",link:"/signup"}],pe=()=>t("footer",{className:"bg-slate-800 p-2 py-4 text-white sm:px-4 md:px-8",children:[e("div",{className:"my-4 border-b border-slate-500"}),e("h3",{className:"mb-2 text-xl sm:text-2xl",children:"Quick Links"}),e("ul",{className:"grid gap-x-8 sm:grid-cols-2  md:flex",children:he.map(r=>e("li",{children:e(x,{to:r.link,className:"underline decoration-white/90\r hover:text-gray-300 sm:text-xl",children:r.name})},r.name))}),t("div",{className:"my-4 flex items-center justify-center gap-3 sm:gap-6",children:[e("a",{href:"https://www.google.com",target:"_blank",children:e("img",{src:me,className:"w-6 sm:w-8",alt:"Source Code on GitHub"})}),e("a",{href:"https://discord.gg/FZY9TqW",target:"_blank",children:e("img",{src:ue,className:"w-6 sm:w-8",alt:"Join the Discord Server"})})]}),t("h4",{className:"text-center sm:text-lg md:text-xl",children:[e("a",{href:"https://delano-lourenco.web.app",target:"_blank",className:"underline decoration-white/90 hover:text-gray-300",children:"Delano Lourenco"})," ","\xA9 ",new Date().getFullYear()]})]}),ge=()=>({})?e(x,{to:"/dashboard",className:"flex w-full items-center justify-center rounded-md border border-transparent bg-green-600 px-8 py-3 text-base font-medium text-white hover:bg-green-700 md:py-4 md:px-10 md:text-lg",children:"Goto dashboard"}):e(x,{to:"/login",className:"flex w-full items-center justify-center rounded-md border border-transparent bg-green-600 px-8 py-3 text-base font-medium text-white hover:bg-green-700 md:py-4 md:px-10 md:text-lg",children:"Login to dashboard"}),fe=()=>e("div",{className:"",children:e("main",{className:"mx-auto max-w-7xl p-2 sm:px-4 md:px-8",children:t("div",{className:"relative bg-white",children:[e("div",{className:"relative z-10 bg-white pb-8 sm:pb-16 md:pb-20 lg:w-full lg:max-w-2xl lg:pb-28 xl:pb-32",children:e("main",{className:"mx-auto mt-10 max-w-7xl px-4 sm:mt-12 sm:px-6 md:mt-16 lg:mt-20 lg:px-8 xl:mt-28",children:t("div",{className:"sm:text-center lg:text-left",children:[e("h1",{className:"text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl md:text-6xl",children:"Temperature Monitor with SMS notification"}),e("p",{className:"mt-3 text-base text-gray-500 sm:mx-auto sm:mt-5 sm:max-w-xl sm:text-lg md:mt-5 md:text-xl lg:mx-0",children:"Remotely monitor temperature using Iot technology and get notified if temperature crosses a threshold."}),e("div",{className:"mt-5 sm:mt-8 sm:flex sm:justify-center lg:justify-start",children:e("div",{className:"flex",children:e(ge,{})})})]})})}),e("div",{className:"lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2"})]})})});console.log("Is prod.");const k=K.create({baseURL:"https://temperature-iot-project.herokuapp.com/api",timeout:2e3,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}});k.interceptors.response.use(function(r){return r.data},function(r){if(r.code=="ECONNABORTED")return Promise.reject(new Error("Couldn't connect to server"));if(r.response&&r.response.data){let l=r.response.data;return l.code&&l.code==404?Promise.reject(new Error("404 Not found")):Promise.reject(new Error(l.message))}return Promise.reject(r)});function xe(r,l){switch(l.type){case"field":return p(h({},r),{[l.name]:l.value});case"login":return p(h({},r),{loading:!0,error:null});case"loginSuccess":return p(h({},r),{loading:!1,error:null});case"loginFail":return p(h({},r),{loading:!1,password:"",error:l.error});default:return r}}const be=()=>{const{user:r,setUser:l}=n.exports.useContext(N),o=D(),u=T();let{from:s}=u.state||{from:{pathname:"/dashboard"}};const[a,d]=n.exports.useReducer(xe,{email:"",password:"",shouldRemember:!0,loading:!1,error:""}),c=i=>{i.preventDefault(),d({type:"login"}),k.post("/auth/login",{email:a.email,password:a.password}).then(m=>{d({type:"loginSuccess"}),l(p(h({},m.user),{token:m.token})),a.shouldRemember&&localStorage.setItem("token",m.token),o(s,{replace:!0})}).catch(m=>{d({type:"loginFail",error:m.message})})};return n.exports.useEffect(()=>{r&&o(s,{replace:!0})},[r]),n.exports.useEffect(()=>{r&&o("/dashboard",{replace:!0})},[]),e("div",{className:"flex-grow",children:e("div",{className:"flex min-h-full items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:t("div",{className:"w-full max-w-md space-y-8",children:[t("div",{children:[e("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Login"}),t("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",e(x,{to:"/signup",className:"font-medium text-green-600 hover:text-green-500",children:"Create an account"})]})]}),t("form",{className:"mt-8 space-y-6",method:"POST",onSubmit:c,children:[e("input",{type:"hidden",name:"remember",defaultValue:"true"}),t("div",{className:"-space-y-px rounded-md shadow-sm",children:[t("div",{children:[e("label",{htmlFor:"email",className:"sr-only",children:"email"}),e("input",{id:"email",name:"email",type:"email",autoComplete:"email",onChange:i=>d({type:"field",name:"email",value:i.target.value}),value:a.email,required:!0,className:"relative block w-full appearance-none rounded-none rounded-t-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:z-10 focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm",placeholder:"Email"})]}),t("div",{children:[e("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",onChange:i=>d({type:"field",name:"password",value:i.target.value}),value:a.password,required:!0,className:"relative block w-full appearance-none rounded-none rounded-b-md border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-500 focus:z-10 focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm",placeholder:"Password"})]})]}),e("div",{className:"mt-6 flex items-center justify-between",children:t("div",{className:"flex items-center",children:[e("input",{id:"remember",type:"checkbox",onChange:i=>d({type:"field",name:"shouldRemember",value:i.target.checked}),checked:a.shouldRemember,className:"form-checkbox h-4 w-4 text-indigo-600 transition duration-150 ease-in-out"}),e("label",{htmlFor:"remember",className:"ml-2 block text-sm leading-5 text-gray-900",children:"Remember me"})]})}),t("div",{children:[t("button",{type:"submit",className:"group relative flex w-full justify-center rounded-md border border-transparent bg-green-600 py-2 px-4 text-sm font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500\r focus:ring-offset-2 disabled:bg-green-900 disabled:text-gray-200",disabled:a.loading,children:[e("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e("svg",{className:"h-5 w-5 text-green-500 group-hover:text-green-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),a.loading?"Loading...":"Login"]}),a.error&&e("div",{className:"mt-2 text-base uppercase text-red-600",children:a.error.split('"').join("")})]})]})]})})})},M={name:"",location:"",description:"",temperature_threshold:0},ve=({isOpen:r,setIsOpen:l,setShowSuccesDialog:o})=>{const{user:u,setUser:s}=n.exports.useContext(N),[a,d]=n.exports.useState(M),[c,i]=n.exports.useState(!1),[m,w]=n.exports.useState(null);n.exports.useEffect(()=>{r&&(i(!1),w(null))},[r]);const y=()=>{l(!1)},L=g=>{g.preventDefault(),w(null),i(!0),k.post("/device",{name:a.name,location:a.location,description:a.description,threshold:a.temperature_threshold}).then(f=>{i(!1),d(M),y(),o(!0),s(p(h({},u),{devices:[...u.devices,f.device]}))}).catch(f=>{i(!1),w(f.message)})};return e(b,{appear:!0,show:r,as:n.exports.Fragment,children:e(v,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:y,children:t("div",{className:"min-h-screen px-4 text-center",children:[e(b.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(v.Overlay,{className:"fixed inset-0 bg-black opacity-50"})}),e("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200B"}),e(b.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t("div",{className:"my-8 inline-block w-full max-w-md transform overflow-hidden rounded-md bg-white p-6 text-left align-middle transition-all",children:[t("div",{className:"flex justify-between",children:[e(v.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:e("span",{children:"Add a new Device"})}),e("button",{className:"text-gray-400 hover:text-gray-800",onClick:y,children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),e("div",{className:"mt-2 h-2 w-full border-t-2 border-gray-100"}),t("form",{method:"POST",onSubmit:L,children:[e("div",{className:"mt-2",children:t("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),e("input",{type:"text",name:"name",required:!0,autoComplete:"devicename",className:"mt-1 block w-full rounded-md border-[1px] border-gray-200 p-1 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm",minLength:3,maxLength:50,onInput:g=>d(p(h({},a),{name:g.target.value})),value:a.name})]})}),e("div",{className:"mt-2",children:t("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700",children:"Location"}),e("input",{type:"text",name:"location",required:!0,maxLength:64,autoComplete:"location",className:"mt-1 block w-full rounded-md border-[1px] border-gray-200 p-1 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm",onInput:g=>d(p(h({},a),{location:g.target.value})),value:a.location})]})}),e("div",{className:"mt-2",children:t("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e("textarea",{type:"text",name:"description",required:!0,maxLength:160,autoComplete:"description",className:"mt-1 block w-full rounded-md border-[1px] border-gray-200 p-1 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm",onInput:g=>d(p(h({},a),{description:g.target.value})),value:a.description})]})}),e("div",{className:"mt-2",children:t("div",{className:"col-span-6 sm:col-span-3",children:[e("label",{htmlFor:"temperature_threshold",className:"block text-sm font-medium text-gray-700",children:"Temperature Threshold (in Celcius)"}),e("input",{type:"number",min:0,max:100,name:"temperature_threshold",required:!0,className:"mt-1 block w-full rounded-md border-[1px] border-gray-200 p-1 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm",onInput:g=>d(p(h({},a),{temperature_threshold:g.target.value})),value:a.temperature_threshold})]})}),m&&e("div",{className:"mt-2 text-xs uppercase text-red-600",children:m.split('"').join("")}),e("div",{className:"mt-4",children:e("button",{type:"submit",disabled:c,className:"inline-flex justify-center rounded-md border border-transparent bg-green-100 px-4 py-2 text-sm font-medium text-green-900 hover:bg-green-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 disabled:bg-gray-200",children:c?"Loading":"Add"})})]})]})})]})})})},R={info:"blue",success:"green",error:"red"},we=({title:r="Title here",description:l="Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.",type:o="info",isOpen:u=!1,setIsOpen:s})=>{function a(){s(!1)}return e(b,{appear:!0,show:u,as:n.exports.Fragment,children:e(v,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:a,children:t("div",{className:"min-h-screen px-4 text-center",children:[e(b.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(v.Overlay,{className:"fixed inset-0 bg-black opacity-50"})}),e("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200B"}),e(b.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t("div",{className:"my-8 inline-block w-full max-w-md transform overflow-hidden rounded-md bg-white p-6 text-left align-middle transition-all",children:[e(v.Title,{as:"h3",className:`text-lg font-medium leading-6 text-${R[o]}-600`,children:r}),e("div",{className:`mt-2 h-2 border-t-2 border-${R[o]}-300`}),e("div",{className:"mt-2",children:e("p",{className:"text-sm text-gray-500",children:l})}),e("div",{className:"mt-4",children:e("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:a,children:"Close"})})]})})]})})})},ye=({isOpen:r,setIsOpen:l})=>{const o=D(),{user:u,setUser:s}=n.exports.useContext(N),[a,d]=n.exports.useState(!1),[c,i]=n.exports.useState(null);n.exports.useEffect(()=>{r&&(d(!1),i(null))},[r]);const m=()=>{l(!1)},w=y=>{y.preventDefault(),i(null),d(!0),k.delete("/auth").then(()=>{d(!1),s(null),localStorage.removeItem("token"),m(),o("/",{replace:!0})}).catch(L=>{d(!1),i(L.message)})};return e(b,{appear:!0,show:r,as:n.exports.Fragment,children:e(v,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:m,children:t("div",{className:"min-h-screen px-4 text-center",children:[e(b.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(v.Overlay,{className:"fixed inset-0 bg-black opacity-50"})}),e("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200B"}),e(b.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t("div",{className:"my-8 inline-block w-full max-w-md transform overflow-hidden rounded-md bg-white p-6 text-left align-middle transition-all",children:[t("div",{className:"flex justify-between",children:[e(v.Title,{as:"h3",className:"text-lg font-medium leading-6 text-red-600",children:e("span",{children:"Confirm Delete Account"})}),e("button",{className:"text-gray-400 hover:text-gray-800",onClick:m,children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),e("div",{className:"mt-2 h-2 w-full border-t-2 border-red-300"}),t("form",{method:"POST",onSubmit:w,children:[e("span",{className:"text-gray-500",children:"Are you sure you want to delete your account and all your devices?"}),c&&e("div",{className:"mt-2 text-xs uppercase text-red-600",children:c.split('"').join("")}),e("div",{className:"mt-4",children:e("button",{type:"submit",disabled:a,className:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 disabled:bg-gray-200",children:a?"Loading":"Delete"})})]})]})})]})})})},Ne=()=>{const{user:r,_:l}=n.exports.useContext(N),[o,u]=n.exports.useState(!1),[s,a]=n.exports.useState(!1),[d,c]=n.exports.useState(!1);return t("div",{className:"flex flex-grow flex-col items-center",children:[e(ye,{isOpen:d,setIsOpen:c}),e("main",{className:"w-full max-w-7xl flex-grow p-2 pt-4",children:e("div",{className:"relative flex-grow items-start justify-start space-x-2 px-5 py-5 md:flex md:flex-row",children:t("main",{className:"mt-4 w-full space-y-4 md:mt-0 md:flex-grow",children:[e("div",{className:"overflow-hidden rounded-lg bg-gradient-to-l from-green-200 via-white to-white shadow",children:e("div",{className:"flex items-center justify-between px-4 py-5 sm:p-6",children:t("h1",{className:"text-4xl font-bold",children:["Hello, ",r.fullname,"."]})})}),e("section",{className:"flex flex-col space-y-4 lg:flex-row lg:space-x-4 lg:space-y-0",children:e("div",{className:"flex-1 flex-shrink-0 space-y-4",children:e("div",{className:"flex flex-col bg-white p-6 shadow lg:flex-row lg:space-y-2 lg:space-x-4",children:t("div",{className:"flex w-full flex-col",children:[t("div",{className:"flex justify-between",children:[e("h2",{className:"text-2xl font-semibold",children:"Your Devices"}),e("button",{className:"h-8 w-32 rounded border border-transparent bg-green-600 px-2 py-1 text-sm text-white shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>u(!0),children:"Add Device"}),e(ve,{isOpen:o,setIsOpen:u,setShowSuccesDialog:a}),e(we,{isOpen:s,setIsOpen:a,title:"Add Device Success",description:"The device was added successfully.",type:"success"})]}),t("div",{className:"mt-4 grid gap-8 sm:grid-cols-2 lg:grid-cols-3",children:[r.devices.length==0&&e("p",{children:"No devices. To add one click Add Device."}),r.devices.map((i,m)=>e(x,{to:`/device/${i._id}`,children:t("div",{className:"flex h-full flex-col flex-wrap border-2 border-gray-100 p-2 px-4 shadow-lg hover:border-green-200 hover:shadow",children:[e("h3",{className:"font-semibold",children:i.name}),e("p",{className:"max-w-full flex-grow text-gray-600",children:i.description}),t("p",{className:"mt-3 flex flex-wrap items-center text-sm text-gray-400",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657 13.414 20.9a1.998 1.998 0 0 1-2.827 0l-4.244-4.243a8 8 0 1 1 11.314 0z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"})]}),i.location]}),e("p",{className:"mt-2 flex items-center space-x-2 text-green-600 hover:underline",children:"View"})]})},m))]})]})})})}),e("section",{className:"flex flex-col space-y-4 lg:flex-row lg:space-x-4 lg:space-y-0",children:e("div",{className:"flex-1 flex-shrink-0 space-y-4",children:e("div",{className:"flex flex-col bg-white p-6 shadow lg:flex-row lg:space-y-2 lg:space-x-4",children:t("div",{className:"flex w-full flex-col",children:[e("div",{className:"flex justify-between",children:e("h2",{className:"text-2xl font-semibold",children:"Your Profile"})}),t("div",{className:"mt-4 gap-8",children:[t("div",{className:"flex flex-wrap gap-3",children:[e("h3",{className:"font-semibold",children:"Phone:"}),t("p",{children:["+91"," ",r.phone.replace(r.phone.substring(2,8),"xxxxxx")]})]}),e("div",{className:"mt-2 flex flex-wrap gap-3",children:e("button",{className:"h-8 rounded border border-transparent bg-red-600 px-2 py-1 text-sm text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>c(!0),children:"Delete Account"})})]})]})})})})]})})})]})},ke=({isOpen:r,setIsOpen:l,device:o})=>{const u=D(),{user:s,setUser:a}=n.exports.useContext(N),[d,c]=n.exports.useState(!1),[i,m]=n.exports.useState(null);n.exports.useEffect(()=>{r&&(c(!1),m(null))},[r]);const w=()=>{l(!1)},y=L=>{L.preventDefault(),m(null),c(!0),k.delete("/device/"+o._id).then(()=>{c(!1),a(p(h({},s),{devices:s.devices.filter(g=>g._id!==o._id)})),w(),u("/dashboard",{replace:!0})}).catch(g=>{c(!1),m(g.message)})};return e(b,{appear:!0,show:r,as:n.exports.Fragment,children:e(v,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:w,children:t("div",{className:"min-h-screen px-4 text-center",children:[e(b.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e(v.Overlay,{className:"fixed inset-0 bg-black opacity-50"})}),e("span",{className:"inline-block h-screen align-middle","aria-hidden":"true",children:"\u200B"}),e(b.Child,{as:n.exports.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t("div",{className:"my-8 inline-block w-full max-w-md transform overflow-hidden rounded-md bg-white p-6 text-left align-middle transition-all",children:[t("div",{className:"flex justify-between",children:[e(v.Title,{as:"h3",className:"text-lg font-medium leading-6 text-red-600",children:e("span",{children:"Confirm Delete Device"})}),e("button",{className:"text-gray-400 hover:text-gray-800",onClick:w,children:e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})})]}),e("div",{className:"mt-2 h-2 w-full border-t-2 border-red-300"}),t("form",{method:"POST",onSubmit:y,children:[t("span",{className:"text-gray-500",children:["Are you sure you want to delete Device"," ",o.name," (",o._id,")?"]}),i&&e("div",{className:"mt-2 text-xs uppercase text-red-600",children:i.split('"').join("")}),e("div",{className:"mt-4",children:e("button",{type:"submit",disabled:d,className:"inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 disabled:bg-gray-200",children:d?"Loading":"Delete"})})]})]})})]})})})};U.register(V,$,H,G,Y,J,Q,Z,X,ee);const Ce=()=>{const{deviceId:r}=te(),l=D(),{user:o,_:u}=n.exports.useContext(N),[s,a]=n.exports.useState(null),[d,c]=n.exports.useState(!1),[i,m]=n.exports.useState([]),[w,y]=n.exports.useState(!1);n.exports.useEffect(()=>{if(!o)return;let f=o.devices.filter(C=>C._id===r);if(f.length==0){l("/404",{replace:!0});return}a(f[0])},[o,r]),n.exports.useEffect(()=>{!s||!s._id||k.get(`/device/${r}/read/${s.readKey}`).then(f=>{f.success&&m(f.values||[])})},[s]),n.exports.useEffect(()=>{let f=setInterval(()=>{!s||!s._id||k.get(`/device/${r}/read/${s.readKey}?skip=${i.length}`).then(C=>{if(console.log("Fetching new data..."),C.success&&C.isConnected?c(!0):c(!1),C.success&&C.values&&C.values.length>0){let F=[...i,...C.values];F.length>86400&&(F=F.slice(F.length-86400)),m(F)}})},1e3);return()=>{clearInterval(f)}},[i]);const L=()=>{s||alert("Error!"),navigator.clipboard.writeText(s.readKey),alert("Read Key copied to clipboard")},g=()=>{s||alert("Error!"),navigator.clipboard.writeText(s.writeKey),alert("Write Key copied to clipboard")};return s?t("div",{className:"flex flex-grow flex-col items-center",children:[e(ke,{isOpen:w,setIsOpen:y,device:s}),e("main",{className:"w-full max-w-7xl flex-grow p-2 pt-4",children:e("div",{className:"relative flex-grow items-start justify-start space-x-2 px-5 py-5 md:flex md:flex-row",children:t("main",{className:"mt-4 w-full space-y-4 md:mt-0 md:flex-grow",children:[e("div",{className:"overflow-hidden rounded-lg bg-gradient-to-l from-green-200 via-white to-white shadow",children:t("div",{className:"px-4 py-5 sm:p-6",children:[t("h1",{className:"flex flex-wrap items-center gap-2 text-4xl font-bold",children:[s.name," ",d?e("span",{className:"rounded-full bg-green-600 px-2 py-1 text-xs font-normal uppercase tracking-wide text-white",children:"Online"}):e("span",{className:"rounded-full bg-red-600 px-2 py-1 text-xs font-normal uppercase tracking-wide text-white",children:"Offline"})]}),t("span",{className:"text- text-xs text-gray-500",children:["ID: ",r]})]})}),t("div",{className:"flex-1 flex-shrink-0 space-y-4",children:[t("div",{className:"flex flex-col bg-white p-6 shadow",children:[e("h2",{className:"",children:s.description}),t("p",{className:"text mt-3 flex flex-wrap items-center text-gray-600",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657 13.414 20.9a1.998 1.998 0 0 1-2.827 0l-4.244-4.243a8 8 0 1 1 11.314 0z"}),e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"})]}),e("span",{className:"mx-1 font-semibold",children:"Location:"}),s.location]}),t("p",{className:"text mt-3 flex flex-wrap items-center text-gray-600",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2zm0 0V9a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v10m-6 0a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2m0 0V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2z"})}),e("span",{className:"mx-1 font-semibold",children:"Threshold:"}),s.threshold," \xB0C"]}),t("p",{className:"text mt-3 flex flex-wrap items-center text-gray-600",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2z"})}),e("span",{className:"mx-1 font-semibold",children:"Created At:"}),new Date(s.created_at).toLocaleDateString()]}),e("div",{className:"flex flex-col",children:e("div",{className:"mt-4 flex flex-wrap gap-8"})})]}),e("div",{className:"flex flex-col bg-white p-6 shadow lg:flex-row lg:space-y-2 lg:space-x-4",children:t("div",{className:"flex flex-grow flex-col",children:[e("h2",{className:"text-2xl font-semibold",children:"Temperature"}),i.length>0?e(re,{data:{labels:i.map(f=>new Date(f.date).toLocaleString()),datasets:[{borderColor:"#aaa",data:i.map(f=>f.temperature)}]},options:{responsive:!0,elements:{point:{radius:0}},plugins:{decimation:{enabled:!0,algorithm:"min-max",samples:5},legend:{display:!1},zoom:{pan:{enabled:!0,mode:"x"},zoom:{wheel:{enabled:!0},pinch:{enabled:!0},mode:"x"}},autocolors:!1,annotation:{annotations:{thresholdLine:{type:"line",yMin:s.threshold,yMax:s.threshold,borderColor:"rgb(244, 87, 121)",borderWidth:2,borderDash:[4],value:"hello",label:{}}}}}}}):e("p",{className:"mt-1 text-gray-600",children:"No temperature data"})]})}),e("div",{className:"flex flex-col bg-white p-6 shadow lg:flex-row lg:space-y-2 lg:space-x-4",children:t("div",{className:"flex flex-col",children:[e("h2",{className:"text-2xl font-semibold",children:"API Keys"}),t("div",{className:"mt-3 flex flex-col gap-2 bg-white sm:flex-row",children:[e("button",{className:"h-8 rounded border border-transparent bg-indigo-600 px-2 py-1 text-sm text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onClick:L,children:"Copy Read Key"}),e("button",{className:"h-8 rounded border border-transparent bg-indigo-600 px-2 py-1 text-sm text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onClick:g,children:"Copy Write Key"})]})]})}),e("div",{className:"bg-white p-6 shadow lg:flex-row lg:space-y-2 lg:space-x-4",children:e("button",{className:"h-8 rounded border border-transparent bg-red-600 px-2 py-1 text-sm text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onClick:()=>y(!0),children:"Delete"})})]})]})})})]}):t("div",{className:"flex min-h-screen w-full flex-col items-center justify-center",children:[e("h1",{className:"mb-2 text-4xl font-semibold",children:"Loading..."}),e("h2",{className:"text-xl",children:"This will only take a moment"})]})};function Le(r,l){switch(l.type){case"field":return p(h({},r),{[l.name]:l.value});case"signup":return p(h({},r),{loading:!0,error:null});case"signupSuccess":return p(h({},r),{loading:!1,error:null});case"signupFail":return p(h({},r),{loading:!1,password:"",error:l.error});default:return r}}const Se=()=>{const{user:r,setUser:l}=n.exports.useContext(N),o=D(),u=T();let{from:s}=u.state||{from:{pathname:"/dashboard"}};const[a,d]=n.exports.useReducer(Le,{email:"",password:"",fullname:"",phone:"",loading:!1,error:""}),c=i=>{i.preventDefault(),d({type:"signup"}),k.post("/auth/signup",{email:a.email,password:a.password,fullname:a.fullname,phone:a.phone}).then(m=>{d({type:"signupSuccess"}),l(p(h({},m.user),{token:m.token})),localStorage.setItem("token",m.token),o(s,{replace:!0})}).catch(m=>{d({type:"signupFail",error:m.message})})};return n.exports.useEffect(()=>{r&&o("/dashboard",{replace:!0})},[]),e("div",{className:"flex-grow",children:e("div",{className:"flex min-h-full items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:t("div",{className:"w-full max-w-md space-y-8",children:[t("div",{children:[e("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Signup"}),t("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Already have an account?"," ",e(x,{to:"/signup",className:"font-medium text-green-600 hover:text-green-500",children:"Login"})]})]}),e("div",{className:"mt-5 md:col-span-2 md:mt-0",children:e("form",{method:"POST",onSubmit:c,children:t("div",{className:"overflow-hidden shadow shadow-green-400 sm:rounded-md",children:[t("div",{className:"bg-white px-4 pt-5 sm:px-6",children:[t("div",{className:"grid grid-cols-6 gap-6",children:[t("div",{className:"col-span-6",children:[e("label",{htmlFor:"fullname",className:"block text-sm font-medium text-gray-700",children:"Full name"}),e("input",{type:"text",name:"fullname",id:"fullname",autoComplete:"full-name",className:"mt-1 block w-full rounded-md border-[1px] border-gray-200 p-1 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm",placeholder:"Full name",onChange:i=>d({type:"field",name:"fullname",value:i.target.value}),required:!0,value:a.fullname})]}),t("div",{className:"col-span-6",children:[e("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone number"}),e("input",{type:"tel",pattern:"[1-9][0-9]{9}",name:"phone",id:"phone",className:"mt-1 block w-full rounded-md border-[1px] border-gray-200 p-1 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500",placeholder:"10 digit Indian phone number",required:!0,onChange:i=>d({type:"field",name:"phone",value:i.target.value}),value:a.phone})]}),t("div",{className:"col-span-6",children:[e("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e("input",{type:"text",name:"email-address",id:"email-address",autoComplete:"email",className:"mt-1 block w-full rounded-md border-[1px] border-gray-200 p-1 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm",placeholder:"Email address",required:!0,onChange:i=>d({type:"field",name:"email",value:i.target.value}),value:a.email})]}),t("div",{className:"col-span-6",children:[e("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e("input",{type:"password",name:"password",id:"password",className:"mt-1 block w-full rounded-md border-[1px] border-gray-200 p-1 shadow-sm focus:border-green-500 focus:outline-none focus:ring-green-500 sm:text-sm",placeholder:"Password",required:!0,onChange:i=>d({type:"field",name:"password",value:i.target.value}),value:a.password})]})]}),e("button",{type:"submit",className:"group relative mt-6 mb-2 flex w-full justify-center rounded-md border border-transparent bg-green-600 py-2 px-4 text-sm font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500\r focus:ring-offset-2 disabled:bg-green-900 disabled:text-gray-200",disabled:a.loading,children:a.loading?"Loading...":"Signup"})]}),a.error&&e("div",{className:"px-4 py-3 text-sm uppercase text-red-600 sm:px-6",children:a.error.split('"').join("")})]})})})]})})})},De=()=>e("div",{className:"mx-auto flex max-w-7xl flex-grow items-center justify-center",children:t("div",{className:"relative pl-4",children:[e("div",{className:"sm:l-0 sm:absolute",children:e("span",{className:"text-2xl text-red-600 sm:-ml-28 sm:border-r-2 sm:pr-4 sm:text-4xl md:-ml-32 md:text-[3rem]",children:"404"})}),e("h1",{className:"text-2xl font-bold sm:text-4xl md:text-[3rem]",children:"Page Not Found"}),e("span",{className:"text-gray-400 md:mt-2 md:block md:text-xl",children:"Please check the URL in the address bar and try again."}),e("div",{className:"mt-6 flex",children:e(x,{to:"/",className:"flex items-center justify-center rounded-md border border-transparent bg-green-600 py-2 px-5 text-base font-medium text-white hover:bg-green-700",children:"Go back home"})})]})}),_=({children:r})=>{let{user:l}=n.exports.useContext(N),o=T();return l?r:e(ae,{to:"/login",state:{from:o},replace:!0})};function Fe(){let[r,l]=n.exports.useState(null),[o,u]=n.exports.useState(!0);return n.exports.useEffect(()=>{const s=localStorage.getItem("token");s?(u(!0),k.post("/auth/token",{token:s}).then(a=>{a.success&&a.user&&l(p(h({},a.user),{token:s})),u(!1)}).catch(a=>{u(!1)})):u(!1)},[]),o?t("div",{className:"flex min-h-screen w-full flex-col items-center justify-center",children:[e("h1",{className:"mb-2 text-4xl font-semibold",children:"Loading..."}),e("h2",{className:"text-xl",children:"This will only take a moment"})]}):e("div",{className:"flex min-h-screen flex-col break-all",children:e(N.Provider,{value:{user:r,setUser:l},children:t(se,{children:[e(ce,{}),t(le,{children:[e(S,{path:"/",element:e(fe,{})}),e(S,{path:"/login",element:e(be,{})}),e(S,{path:"/signup",element:e(Se,{})}),e(S,{path:"/dashboard",element:e(_,{children:e(Ne,{})})}),e(S,{path:"/device/:deviceId",element:e(_,{children:e(Ce,{})})}),e(S,{path:"*",element:e(De,{})})]}),e(pe,{})]})})})}const je=document.getElementById("root");ne.exports.render(e(oe.StrictMode,{children:e(Fe,{})}),je);
